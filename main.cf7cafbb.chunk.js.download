(this["webpackJsonpcheat-sheet-maker"]=this["webpackJsonpcheat-sheet-maker"]||[]).push([[0],{134:function(e,t,n){},501:function(e,t,n){"use strict";n.r(t);var l=n(2),c=n.n(l),a=n(30),s=n.n(a),r=n(6),i=n(29),o=n(115),d=n(3),u="SIGN_UP_FAILED",b="SIGN_UP_SUCCESS",j="SIGN_IN_SUCCESS",x="SIGN_IN_FAILED",h="USER_LOADED",f="USER_NOT_LOADED",m="SIGN_OUT",p="USER_EDITED",O="USER_NOT_EDITED",g="TOGGLE_IS_SIGNUP",v="USER_DELETED",y="USER_NOT_DELETED",w={isSignup:!1,user:null,token:localStorage.getItem("token"),errMsg:{for:"",msg:""}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:case x:case f:case m:case v:return localStorage.removeItem("token"),Object(d.a)(Object(d.a)({},e),{},{user:null,token:null,isSignup:!1,errMsg:t.payload});case b:case j:return localStorage.setItem("token",t.payload.token),Object(d.a)(Object(d.a)({},e),{},{user:t.payload.user,token:t.payload.token,errMsg:{for:"",msg:""}});case h:case p:return Object(d.a)(Object(d.a)({},e),{},{user:t.payload,errMsg:{for:"",msg:""}});case O:case y:return Object(d.a)(Object(d.a)({},e),{},{errMsg:t.payload});case g:return Object(d.a)(Object(d.a)({},e),{},{isSignup:!e.isSignup,errMsg:{for:"",msg:""}});default:return e}},k=n(14),S="MOVE_CELL_UP",C="MOVE_CELL_DOWN",E="DELETE_CELL",I="ADD_CELL",T="SET_CELL_TITLE",_="SELECT_CELL",M="MOVE_ROW_UP",V="MOVE_ROW_DOWN",D="DELETE_ROW",L="ADD_ROW",U="UPDATE_ROW",P="SET_SHEET_SUCCESS",R="UPDATE_SHEET_SUCCESS",A="DELETE_SHEET_SUCCESS",F={selectedCell:0},B=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case A:return F;case P:return Object(d.a)({selectedCell:null===(e=n.payload.cells[0])||void 0===e?void 0:e.id},n.payload);case I:var l=0===t.cells.length?0:Math.max.apply(Math,Object(k.a)(t.cells.map((function(e){return e.id}))))+1;return Object(d.a)(Object(d.a)({},t),{},{selectedCell:l,cells:[].concat(Object(k.a)(t.cells),[{id:l,title:"",rows:[{id:0,value:"",lang:t.defaultLang}]}])});case S:var c=n.payload;return 0===c?t:Object(d.a)(Object(d.a)({},t),{},{cells:[].concat(Object(k.a)(t.cells.slice(0,c-1)),[t.cells[c],t.cells[c-1]],Object(k.a)(t.cells.slice(c+1)))});case C:var a=n.payload;return a===t.cells.length-1?t:Object(d.a)(Object(d.a)({},t),{},{cells:[].concat(Object(k.a)(t.cells.slice(0,a)),[t.cells[a+1],t.cells[a]],Object(k.a)(t.cells.slice(a+2)))});case T:var s=n.payload,r=s.cellId,i=s.value,o=t.cells.map((function(e){return e.id===r?Object(d.a)(Object(d.a)({},e),{},{title:i}):e}));return Object(d.a)(Object(d.a)({},t),{},{cells:o});case E:var u,b=n.payload,j=t.cells.findIndex((function(e){return e.id===b})),x=(null===(u=t.cells[0===j?1:j-1])||void 0===u?void 0:u.id)||0;return Object(d.a)(Object(d.a)({},t),{},{selectedCell:x,cells:t.cells.filter((function(e){return e.id!==b}))});case L:var h=n.payload,f=t.cells.findIndex((function(e){return e.id===h})),m=t.cells[f].rows,p=0===m.length?0:Math.max.apply(Math,Object(k.a)(m.map((function(e){return e.id}))))+1,O=t.cells.map((function(e){return e.id===h?Object(d.a)(Object(d.a)({},e),{},{rows:[].concat(Object(k.a)(m),[{id:p,value:"",lang:t.defaultLang}])}):e}));return Object(d.a)(Object(d.a)({},t),{},{cells:O});case M:var g=n.payload,v=g.cellId,y=g.rowIndex,w=t.cells.findIndex((function(e){return e.id===v})),N=t.cells[w].rows;if(0===y)return t;N=[].concat(Object(k.a)(N.slice(0,y-1)),[N[y],N[y-1]],Object(k.a)(N.slice(y+1)));var R=t.cells.map((function(e){return e.id===v?Object(d.a)(Object(d.a)({},e),{},{rows:N}):e}));return Object(d.a)(Object(d.a)({},t),{},{cells:R});case V:var B=n.payload,G=B.cellId,H=B.rowIndex,q=t.cells.findIndex((function(e){return e.id===G})),z=t.cells[q].rows;if(H===z.length-1)return t;z=[].concat(Object(k.a)(z.slice(0,H)),[z[H+1],z[H]],Object(k.a)(z.slice(H+2)));var W=t.cells.map((function(e){return e.id===G?Object(d.a)(Object(d.a)({},e),{},{rows:z}):e}));return Object(d.a)(Object(d.a)({},t),{},{cells:W});case D:var Y=n.payload,J=Y.cellId,K=Y.rowId,Q=t.cells.findIndex((function(e){return e.id===J})),X=t.cells[Q].rows.filter((function(e){return K!==e.id})),Z=t.cells.map((function(e){return e.id===J?Object(d.a)(Object(d.a)({},e),{},{rows:X}):e}));return Object(d.a)(Object(d.a)({},t),{},{cells:Z});case U:var $=n.payload,ee=$.cellId,te=$.rowId,ne=$.update,le=t.cells.findIndex((function(e){return e.id===ee})),ce=t.cells[le].rows.map((function(e){return te===e.id?Object(d.a)(Object(d.a)({},e),ne):e})),ae=t.cells.map((function(e){return e.id===ee?Object(d.a)(Object(d.a)({},e),{},{rows:ce}):e}));return Object(d.a)(Object(d.a)({},t),{},{cells:ae});case _:return Object(d.a)(Object(d.a)({},t),{},{selectedCell:n.payload});default:return t}},G=n(13),H="GET_SHEETS_SUCCESS",q="GET_SHEETS_FAILED",z="GET_SHEET_SUCCESS",W="SET_SORT_BY",Y="SET_THERE_IS_MORE",J="GET_NP_SHEETS_SUCCESS",K=n(51),Q=n.n(K),X=function(e){for(var t=Date.now(),n=[{unit:"minute",factor:6e4},{unit:"hour",factor:36e5},{unit:"day",factor:864e5},{unit:"week",factor:6048e5},{unit:"month",factor:2592e6},{unit:"year",factor:31104e6}].map((function(n){return{unit:n.unit,elpasedTime:Math.floor(Math.abs(t-e)/n.factor)}})),l=n.length-1;l>=0;l--)if(n[l].elpasedTime>0)return"".concat(n[l].elpasedTime," ").concat(n[l].unit).concat(1===n[l].elpasedTime?"":"s"," ").concat(t>e?"ago":"remains");return"just now"},Z=function(e,t){return Object.keys(e).filter((function(n){return t(e[n])})).reduce((function(t,n){return Object(d.a)(Object(d.a)({},t),{},Object(G.a)({},n,e[n]))}),{})},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:{},errMsg:"",sortBy:"most-recent",thereIsMoreOnTheServer:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return Object(d.a)(Object(d.a)({},e),{},{errMsg:"",thereIsMoreOnTheServer:t.payload.thereIsMoreOnTheServer,data:Object(d.a)(Object(d.a)({},e.data),Q.a.keyBy(t.payload.sheets,"_id"))});case J:return Object(d.a)(Object(d.a)({},e),{},{errMsg:"",data:Object(d.a)(Object(d.a)({},e.data),Q.a.keyBy(t.payload,"_id"))});case A:return Object(d.a)(Object(d.a)({},e),{},{data:Q.a.omit(e.data,t.payload)});case z:case R:return Object(d.a)(Object(d.a)({},e),{},{data:Object(d.a)(Object(d.a)({},e.data),{},Object(G.a)({},t.payload._id,t.payload))});case q:return Object(d.a)(Object(d.a)({},e),{},{errMsg:t.payload});case W:return Object(d.a)(Object(d.a)({},e),{},{data:Z(e.data,(function(e){return!e.published})),sortBy:t.payload});case Y:return Object(d.a)(Object(d.a)({},e),{},{thereIsMoreOnTheServer:t.payload.thereIsMoreOnTheServer});case m:case v:return Object(d.a)(Object(d.a)({},e),{},{data:Z(e.data,(function(e){return e.published}))});default:return e}},ee="TOGGLE_ONGOING_SERVER_ACTIVITY",te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:return Object(d.a)(Object(d.a)({},e),t.payload);default:return e}},ne=Object(i.c)({auth:N,sheetMaker:B,sheets:$,ongoingOnServer:te}),le=(n(134),n(8)),ce=n(16),ae=Object(ce.a)(),se="/user",re="/",ie="/manage-account",oe="/favorites",de="/sheet-maker",ue="/new-sheet",be="/sheet-settings",je="/sheet",xe="/sheet-preview",he=n(11),fe=n.n(he),me=function(e){return{type:ee,payload:e}},pe=function(e){var t={headers:{"content-type":"application/json"}};return e&&(t.headers["x-auth-token"]=e),t},Oe=function(e){var t=e.onlyIfCondition,n=void 0!==t&&t,l=e.match;return function(e,t){var c,a,s,r,i=t().sheets,o=i.sortBy,u=i.data;switch(l.path){case"".concat(se,"/:id"):s={byUserId:l.params.id},r=Object.keys(u).filter((function(e){return u[e].authorId===l.params.id&&u[e].published})).length<25;break;case oe:s={favoredByUserId:null===(c=t().auth)||void 0===c||null===(a=c.user)||void 0===a?void 0:a._id},r=Object.keys(u).filter((function(e){var n,l;return u[e].favorites.includes(null===(n=t().auth)||void 0===n||null===(l=n.user)||void 0===l?void 0:l._id)&&u[e].published})).length<25;break;default:s={},r=Object.keys(u).filter((function(e){return u[e].published})).length<25}var b=Object.keys(u);if(n){if(!r)return fe.a.get("/api/sheets/",{params:Object(d.a)({onlyThereIsMore:!0,currentSheetIds:b},s)}).then((function(t){e({type:Y,payload:t.data})}));e(me({"getting-first-sheets":!0}))}else e(me({"getting-more-sheets":!0}));return fe.a.get("/api/sheets/",{params:Object(d.a)({currentSheetIds:b,sortBy:o},s)}).then((function(t){e({type:H,payload:t.data})})).catch((function(t){e({type:q,payload:t.response.data.msg})})).finally((function(){e(me({"getting-first-sheets":!1,"getting-more-sheets":!1}))}))}},ge=function(e){return function(t,n){var l;fe.a.patch("/api/sheets/toggle-favorites/".concat(e),{},pe(null===(l=n().auth)||void 0===l?void 0:l.token)).then((function(e){t({type:z,payload:e.data})}))}},ve=n(4),ye=n(1),we={primary:"rounded-md bg-blue-500 text-white p-2 border-2 border-blue-500",secondary:"bg-blue-100 text-blue-500 font-bold text-sm rounded-md px-4 py-2",text:"text-blue-500 p-2 ",open:"p-2 rounded-md border-2 border-blue-500 text-blue-500",none:""},Ne={primary:"transition duration-300 ease-in-out transform hover:bg-blue-400",secondary:"transition duration-300 ease-in-out transform hover:bg-blue-500 hover:text-white",text:"transition duration-300 ease-in-out hover:text-blue-700",open:"transition duration-300 ease-in-out hover:bg-blue-500 hover:text-white",none:"transition duration-300 ease-in-out hover:opacity-70"},ke=function(e){var t=e.children,n=e.className,l=e.onClick,c=e.disabled,a=void 0!==c&&c,s=e.loading,r=void 0!==s&&s,i=e.color,o=e.title,d=void 0===o?"":o,u=e.type,b=void 0===u?"primary":u,j="".concat("flex items-center space-x-1 justify-center focus-yellow"," ").concat(we[b]," ").concat(n," ").concat(a?"cursor-not-allowed":Ne[b]);return i&&(j=j.replaceAll("blue",i)),Object(ye.jsxs)("button",{className:j,onClick:l,disabled:a||r,title:d,children:[r&&Object(ye.jsx)(ve.r,{className:"animate-spin mr-1"}),t]})},Se=n(5),Ce=function(e){var t=e.text,n=void 0===t?"copied":t,c=e.classNames,a=e.buttonText,s=e.isCompact,r=void 0!==s&&s,i=e.label,o=Object(l.useState)(!1),d=Object(Se.a)(o,2),u=d[0],b=d[1],j=function(){if(!u)try{navigator.clipboard.writeText(n).then((function(){b(!0)}))}catch(e){}};return Object(l.useEffect)((function(){var e;return u&&(e=setTimeout((function(){b(!1)}),2e3)),function(){clearTimeout(e)}}),[u]),r?Object(ye.jsxs)("div",{className:c.container,children:[Object(ye.jsx)(ke,{type:"none",className:c.button,onClick:j,children:u?Object(ye.jsx)(ve.h,{}):a}),i&&Object(ye.jsx)("span",{className:c.label,children:i})]}):Object(ye.jsxs)("div",{className:c.container,children:[Object(ye.jsx)("p",{className:c.text,children:n}),Object(ye.jsx)(ke,{type:"text",className:c.button,onClick:j,children:u?Object(ye.jsx)(ve.h,{}):a})]})},Ee=n(74),Ie=function(e){var t=e.hide,n=e.sheetId,l=e.sheetTitle,c="".concat(window.origin).concat(je,"/").concat(n),a="".concat(l," cheat sheet"),s=[{id:"reddit",label:"Reddit",icon:Object(ye.jsx)(Ee.a,{}),bg:"bg-reddit-orange",href:"http://www.reddit.com/submit?url=".concat(c,"&title=").concat(a)},{id:"twitter",label:"Twitter",icon:Object(ye.jsx)(Ee.b,{}),bg:"bg-twitter-blue",href:"https://twitter.com/intent/tweet?text=".concat(a,"&url=").concat(c)}];return Object(ye.jsxs)("div",{className:"bg-blue-100 w-full max-w-lg p-4 relative rounded-xl",children:[Object(ye.jsxs)("div",{className:"flex flex-col space-y-6",children:[Object(ye.jsx)("p",{className:"text-lg md:text-xl font-semibold text-blue-500",children:"Share"}),Object(ye.jsxs)("div",{className:"flex items-center justify-between md:justify-start md:space-x-4",children:[s.map((function(e){return Object(ye.jsxs)("div",{className:"flex flex-col space-y-1 items-center",children:[Object(ye.jsx)("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center rounded-full w-12 h-12 md:h-16 md:w-16 text-2xl md:text-3xl text-white ".concat(e.bg," focus-yellow hover:opacity-70"),children:e.icon}),Object(ye.jsx)("span",{className:"text-blue-500 text-sm font-semibold",children:e.label})]},e.id)})),Object(ye.jsx)(Ce,{buttonText:Object(ye.jsx)(ve.l,{}),isCompact:!0,text:c,label:"copy link",classNames:{text:"text-sm truncate",label:"text-blue-500 text-sm font-semibold",button:"rounded-full w-12 h-12 text-white bg-gray-500 text-2xl",container:"flex flex-col space-y-1 items-center md:hidden "}})]}),Object(ye.jsx)(Ce,{buttonText:"copy",isCompact:!1,text:c,classNames:{text:"text-sm truncate",button:"h-8 font-semibold rounded-xl",container:"mt-4 p-2 border-2 border-blue-500 bg-blue-50 rounded-xl hidden md:flex justify-between items-center"}})]}),Object(ye.jsx)(ke,{type:"none",className:"absolute top-2 right-2 text-2xl rounded-full font-bold text-blue-500 p-2 hover:bg-blue-300",onClick:function(){t()},children:Object(ye.jsx)(ve.j,{})})]})},Te=function(e){var t=e.children,n=document.getElementById("modal-root");return n?s.a.createPortal(Object(ye.jsx)("div",{children:Object(ye.jsx)("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:Object(ye.jsxs)("div",{className:"flex items-center justify-center min-h-screen py-4 px-4 sm:block sm:p-0",children:[Object(ye.jsx)("div",{className:"fixed inset-0 ",children:Object(ye.jsx)("div",{className:"absolute inset-0 bg-gray-500  opacity-75"})}),Object(ye.jsx)("div",{className:"w-full h-full flex items-center justify-center pt-20",children:t})]})})}),n):null},_e=function(e){var t=e.okColor?e.okColor:"red";return Object(ye.jsxs)("div",{className:"inline-block align-bottom bg-white  rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[Object(ye.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:Object(ye.jsxs)("div",{className:"sm:flex sm:items-start",children:[e.icon&&Object(ye.jsx)("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full sm:mx-0 sm:h-10 sm:w-10 text-xl text-white bg-".concat(t,"-300"),children:e.icon}),Object(ye.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[e.title&&Object(ye.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline",children:e.title}),e.text&&Object(ye.jsx)("div",{className:"mt-2",children:Object(ye.jsx)("p",{className:"text-sm text-gray-500",children:e.text})})]})]})}),Object(ye.jsxs)("div",{className:"bg-gray-50 px-4 py-3 flex flex-row-reverse space-x-2",children:[e.okText&&Object(ye.jsx)(ke,{className:"ml-2 px-4 py-1",onClick:function(t){t.stopPropagation(),e.onOk()},loading:e.loading,color:t,children:e.okText}),Object(ye.jsx)(ke,{className:"px-4 py-1",type:"secondary",onClick:function(t){t.stopPropagation(),e.onCancel()},children:e.cancelText?e.cancelText:"Cancel"})]})]})},Me=function(){var e=Object(l.useState)(!1),t=Object(Se.a)(e,2),n=t[0],a=t[1],s=function(){return a(!1)};return[function(e){var t=e.children,l=e.text,a=e.title,r=e.okText,i=e.onOk,o=e.icon,d=e.loading;return Object(ye.jsx)(c.a.Fragment,{children:n&&Object(ye.jsx)(Te,{children:t||Object(ye.jsx)(_e,{onCancel:s,text:l,title:a,loading:d,okText:r,onOk:i,icon:o})})})},function(){return a(!0)},s]},Ve=n(12),De=n(116),Le=n(39),Ue=Object(r.b)((function(e){return{auth:e.auth}}),{toggleFavorites:ge})(Object(le.f)((function(e){var t=e.sheet,n=e.auth,l=e.toggleFavorites,c=e.location,a=t.title,s=t.cells,r=t.authorId,i=t.authorUsername,o=t.createdAt,d=t.publishedAt,u=t.favorites,b=t.published,j=Me(),x=Object(Se.a)(j,3),h=x[0],f=x[1],m=x[2],p={pathname:"".concat(de,"/").concat(t._id),state:{prevPathname:c.pathname}};return Object(ye.jsxs)("div",{className:"w-full rounded-3xl bg-white shadow-md text-gray-700 flex flex-col overflow-hidden relative \n      ".concat(b?"h-64":"h-36"),children:[Object(ye.jsx)(Ve.a,{to:b?"".concat(je,"/").concat(t._id):p,className:"flex-grow rounded-t-3xl transition duration-150 ease-in-out hover:bg-gray-50 transform  focus-yellow",children:Object(ye.jsxs)("div",{className:"px-5 py-4",children:[Object(ye.jsxs)("h3",{className:"text-lg font-semibold line-clamp-2",children:[a," "]}),b&&Object(ye.jsxs)("p",{className:"leading-relaxed font-semibold text-gray-500 text-sm mt-1 line-clamp-4 ",children:[Object(ye.jsxs)("span",{className:" text-blue-500 text-sm",children:[s.length," cell",1!==s.length&&"s",":"," "]}),s.map((function(e){return e.title})).join(", ")]})]})}),Object(ye.jsxs)("div",{className:"mt-auto flex-shrink-0",children:[b&&Object(ye.jsxs)("p",{className:"truncate bg-gray-100 text-xs font-semibold text-blue-500 py-2 px-5",children:[Object(ye.jsx)("span",{children:X(new Date(b?d:o))}),Object(ye.jsx)("span",{children:Object(ye.jsx)(De.a,{className:"text-xs inline"})}),Object(ye.jsxs)("span",{children:["by"," ",Object(ye.jsx)(Ve.a,{className:"underline focus-yellow",to:"".concat(se,"/").concat(r),children:i})]})]}),function(){var e,c,a;return b?Object(ye.jsxs)("div",{className:"flex justify-between items-center text-lg text-gray-700 ",children:[Object(ye.jsx)(ke,{className:"group w-1/2 h-9 bg-gray-200 rounded-bl-3xl border-r border-blue-200",title:"share",type:"none",onClick:f,children:Object(ye.jsx)(Le.b,{className:"group-hover:text-blue-500"})}),(null===n||void 0===n||null===(e=n.user)||void 0===e?void 0:e._id)===(null===t||void 0===t?void 0:t.authorId)&&Object(ye.jsxs)(Ve.a,{to:p,className:"w-1/2 h-9 flex justify-center items-center bg-gray-200 border-l border-r border-blue-200 transition duration-300 ease-in-out hover:opacity-70 focus-yellow",children:[Object(ye.jsx)("span",{className:"sr-only",children:"Edit sheet"}),Object(ye.jsx)(ve.m,{})]}),Object(ye.jsxs)(ke,{className:"group w-1/2 h-9 bg-gray-200 rounded-br-3xl border-l border-blue-200  space-x-0.5",type:"none",title:(null===n||void 0===n?void 0:n.user)?u.includes(null===n||void 0===n||null===(c=n.user)||void 0===c?void 0:c._id)?"remove from favorites":"add to favorites":"",disabled:!(null===n||void 0===n?void 0:n.user),onClick:function(e){e.stopPropagation(),l(t._id)},children:[u.includes(null===n||void 0===n||null===(a=n.user)||void 0===a?void 0:a._id)?Object(ye.jsx)(ve.e,{className:"text-blue-500 "}):Object(ye.jsx)(ve.y,{className:"group-hover:text-blue-500"}),Object(ye.jsx)("span",{className:"text-xs",children:u.length})]})]}):Object(ye.jsxs)("div",{className:"flex justify-between items-center text-lg  text-gray-700 ",children:[Object(ye.jsx)("p",{className:"w-1/2 h-9 flex justify-center items-center bg-gray-200 font-semibold text-blue-500 text-xs",children:X(new Date(o))}),Object(ye.jsxs)(Ve.a,{to:p,className:"w-1/2 h-9 flex justify-center items-center bg-gray-200 border-l border-blue-200 transition duration-300 ease-in-out hover:opacity-70 focus-yellow",children:[Object(ye.jsx)("span",{className:"sr-only",children:"Edit sheet"}),Object(ye.jsx)(ve.m,{})]})]})}()]}),Object(ye.jsx)(h,{children:Object(ye.jsx)(Ie,{hide:m,sheetId:null===t||void 0===t?void 0:t._id,sheetTitle:null===t||void 0===t?void 0:t.title})})]})}))),Pe={1:"text-3xl lg:text-4xl",2:"text-2xl lg:text-3xl",3:"text-xl",4:"text-lg",5:"text-base",6:"text-base"},Re=function(e){var t=e.level,n=e.text,l=e.className,c="".concat("font-semibold text-blue-500"," ").concat(Pe[t]," ").concat(l);switch(t){case 1:return Object(ye.jsx)("h1",{className:c,children:n});case 2:return Object(ye.jsx)("h2",{className:c,children:n});case 3:return Object(ye.jsx)("h3",{className:c,children:n});case 4:return Object(ye.jsx)("h4",{className:c,children:n});case 5:return Object(ye.jsx)("h5",{className:c,children:n});case 6:default:return Object(ye.jsx)("h6",{className:c,children:n})}},Ae=function(){return Object(ye.jsxs)("div",{className:"h-full w-full flex justify-center items-center space-x-8",children:[Object(ye.jsxs)("div",{className:"relative w-12 h-12 flex justify-center items-center",children:[Object(ye.jsx)("div",{className:"absolute animate-ping w-full h-full flex justify-between",children:[1,2,3,4,5,6].map((function(e){return Object(ye.jsx)("div",{className:"h-full w-px bg-blue-500"},e)}))}),Object(ye.jsx)("div",{className:"absolute animate-ping w-full h-full flex flex-col justify-between",children:[1,2,3,4,5,6].map((function(e){return Object(ye.jsx)("div",{className:"h-px w-full bg-blue-500"},e)}))})]}),Object(ye.jsx)("span",{className:"font-mono text-blue-500",children:"loading..."})]})},Fe=function(){var e=Object(l.useRef)(null),t=Object(l.useState)(!1),n=Object(Se.a)(t,2),c=n[0],a=n[1];return Object(l.useEffect)((function(){var t=function(t){null===e.current||e.current.contains(t.target)||a(!1)};return c&&window.addEventListener("click",t),function(){window.removeEventListener("click",t)}}),[c,e]),[c,function(){a((function(e){return!e}))},e]},Be=n(40),Ge=function(e){var t=e.searchable,n=void 0!==t&&t,c=e.options,a=void 0===c?[]:c,s=e.value,r=e.onValueChange,i=e.id,o=e.buttonClassName,d=void 0===o?"":o,u=e.menuClassName,b=void 0===u?"":u,j=Fe(),x=Object(Se.a)(j,3),h=x[0],f=x[1],m=x[2],p=Object(l.useState)(""),O=Object(Se.a)(p,2),g=O[0],v=O[1];Object(l.useEffect)((function(){v("")}),[h]);var y=a[a.findIndex((function(e){return e.value===s}))]||null;return Object(ye.jsxs)("div",{className:"relative h-full w-full",ref:m,children:[n?Object(ye.jsx)("input",{type:"text",id:i,className:"".concat(d," w-full bg-white h-full pl-3 pr-10 py-2 text-left cursor-default focus-yellow text-sm placeholder-black"),"aria-haspopup":"listbox",placeholder:(null===y||void 0===y?void 0:y.label)||"select...","aria-labelledby":"listbox-label",onClick:function(){f(),v("")},value:g,onChange:function(e){v(e.target.value)}}):Object(ye.jsx)("button",{id:i,className:"".concat(d," w-full bg-white h-full pl-3 pr-10 py-2 text-left cursor-default focus-yellow sm:text-sm"),onClick:f,children:y?y.label:"Select..."}),Object(ye.jsx)("span",{className:"ml-3 absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none text-gray-400",children:h&&n?Object(ye.jsx)(ve.x,{}):Object(ye.jsx)(Be.b,{})}),h&&function(){var e=a.filter((function(e){return""===g||e.label.toLowerCase().includes(g.toLowerCase())}));return Object(ye.jsx)("ul",{className:"".concat(b," absolute z-10 mt-1 w-full bg-white shadow-lg max-h-56 rounded-md py-1 overflow-auto focus:outline-none "),tabIndex:"-1",role:"listbox","aria-labelledby":"listbox-label","aria-activedescendant":"listbox-option-3",children:0===e.length?Object(ye.jsxs)("div",{className:"flex items-center justify-center p-4 space-x-2 text-gray-600 text-base",children:[Object(ye.jsx)(ve.z,{}),Object(ye.jsx)("span",{children:"No options"})]}):e.map((function(e,t){return Object(ye.jsxs)("li",{className:" cursor-default select-none relative py-2 pl-3 pr-9 \n                ".concat(s===e.value?"font-semibold text-gray-700":"","\n              hover:bg-blue-100"),role:"option","aria-selected":s===e.value?"true":"false",onClick:function(){r(e.value),f()},children:[Object(ye.jsx)("div",{className:"flex items-center",children:Object(ye.jsx)("span",{className:"ml-1 block truncate",children:e.label})}),s===e.value&&Object(ye.jsx)("span",{className:"font-semibold absolute inset-y-0 right-0 flex items-center pr-4",children:Object(ye.jsx)(ve.h,{})})]},e.value)}))})}()]})},He=Object(r.b)((function(e){return{sheets:e.sheets,auth:e.auth,ongoingOnServer:e.ongoingOnServer}}),{getSheets:Oe,onSortByValueChange:function(e){var t=e.value,n=e.match;return function(e){e({type:W,payload:t}),e(Oe({onlyIfCondition:!0,match:n}))}}})(Object(le.f)((function(e){var t,n=e.getSheets,c=e.sheets,a=e.listTitle,s=e.onSortByValueChange,r=e.match,i=e.auth,o=e.ongoingOnServer,u=c.errMsg,b=c.data,j=c.sortBy,x=c.thereIsMoreOnTheServer;switch(r.path){case"".concat(se,"/:id"):t=Z(b,(function(e){return e.authorId===r.params.id&&e.published}));break;case oe:t=Z(b,(function(e){var t;return e.favorites.includes(null===i||void 0===i||null===(t=i.user)||void 0===t?void 0:t._id)&&e.published}));break;default:t=Z(b,(function(e){return e.published}))}t=Object.keys(t).sort((function(e,n){switch(j){case"most-popular":return t[n].favorites.length-t[e].favorites.length;case"most-recent":default:return new Date(t[n].publishedAt)-new Date(t[e].publishedAt)}})).reduce((function(e,t){return Object(d.a)(Object(d.a)({},e),{},Object(G.a)({},t,b[t]))}),{}),Object(l.useEffect)((function(){n({onlyIfCondition:!0,match:r})}),[n,r]);return Object(ye.jsxs)("section",{children:[Object(ye.jsxs)("div",{className:"w-full flex items-center flex-col space-y-4 md:flex-row md:justify-between md:space-y-0",children:[Object(ye.jsx)(Re,{level:2,text:a}),Object.keys(t).length>1&&Object(ye.jsxs)("div",{className:"w-full md:w-64 flex items-center shadow-md h-10",children:[Object(ye.jsx)("div",{className:"flex-shrink-0 text-sm  h-full bg-gray-50 px-2 flex items-center rounded-l-md font-semibold text-blue-500",children:Object(ye.jsx)("label",{htmlFor:"sortByOptions",children:"Sort by"})}),Object(ye.jsx)(Ge,{value:j,id:"sortByOptions",options:[{value:"most-recent",label:"Most recent"},{value:"most-popular",label:"Most popular"}],searchable:!1,onValueChange:function(e){return s({value:e,match:r})},buttonClassName:"rounded-r-md "})]})]}),0===Object.keys(t).length&&o["getting-first-sheets"]?Object(ye.jsx)("div",{className:"p-24",children:Object(ye.jsx)(Ae,{})}):u?Object(ye.jsxs)("div",{className:"mt-16  w-full flex flex-col justify-center items-center text-red-400 text-xl opacity-70",children:[Object(ye.jsx)(ve.k,{className:"text-5xl"}),Object(ye.jsx)("span",{className:"",children:u})]}):0===Object.keys(t).length?Object(ye.jsxs)("div",{className:"mt-16  w-full flex flex-col justify-center items-center text-blue-500 text-xl opacity-70",children:[Object(ye.jsx)(ve.B,{className:"text-5xl"}),Object(ye.jsx)("span",{className:"",children:"No sheets yet"})]}):Object(ye.jsxs)("div",{className:"flex flex-col space-y-6",children:[Object(ye.jsx)("div",{className:"mt-5 w-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8 place-content-between",children:Object.keys(t).map((function(e){return Object(ye.jsx)(Ue,{sheet:t[e]},e)}))}),Object(ye.jsx)("div",{className:"w-full flex items-center justify-center pt-16",children:x&&Object(ye.jsx)(ke,{type:"open",className:"rounded-full px-6",loading:o["getting-more-sheets"],onClick:function(){n({onlyIfCondition:!1,match:r})},children:o["getting-more-sheets"]?"Loading":"Load more sheets"})})]})]})}))),qe=function(){return Object(ye.jsx)("div",{className:"w-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8 place-content-between",children:Object(ye.jsx)("div",{className:"w-full h-32 md:h-64 p-2 md:p-4 rounded-3xl bg-white shadow-md",children:Object(ye.jsxs)(Ve.a,{to:ue,className:"w-full h-full rounded-3xl bg-blue-100 shadow-sm text-blue-500 text-2xl flex-col font-bold flex justify-center items-center focus-yellow transition duration-300 ease-in-out hover:bg-opacity-70",children:[Object(ye.jsx)(ve.w,{className:"text-5xl"}),Object(ye.jsx)("span",{children:"Create new"})]})})})},ze=function(e){var t=e.name,n=e.id,c=e.required,a=e.inputType,s=e.onChange,r=e.value,i=e.placeholder,o=e.extra,d=Object(l.useState)("text"),u=Object(Se.a)(d,2),b=u[0],j=u[1];Object(l.useEffect)((function(){j(a)}),[a]);var x="w-full h-12 px-2 pr-10 rounded-md  placeholder-gray-400  bg-white text-lg focus-yellow hover:bg-gray-50 ".concat(o);return Object(ye.jsxs)("div",{className:"relative flex items-center w-full",children:[Object(ye.jsx)("input",{required:c,autoComplete:"off",id:n,type:b||"text",onChange:s,value:r,name:t,className:x,placeholder:i}),"password"===a&&Object(ye.jsx)("div",{className:"absolute right-1 text-lg p-1 rounded-full hover:bg-blue-50 text-gray-700",onClick:function(e){e.preventDefault(),"password"===a&&j((function(e){return"text"===e?"password":"text"}))},children:"password"===b?Object(ye.jsx)(ve.o,{}):Object(ye.jsx)(ve.n,{})})]})},We=Object(r.b)((function(e){return{auth:e.auth,ongoingOnServer:e.ongoingOnServer}}),{signUp:function(e){var t=e.username,n=e.password;return function(e){return e(me({authenticating:!0})),fe.a.post("/api/users/signup",{username:t,password:n}).then((function(t){e({type:b,payload:t.data})})).catch((function(t){e({type:u,payload:{for:"authentication",msg:t.response.data.msg}})})).finally((function(){e(me({authenticating:!1}))}))}},signIn:function(e){var t=e.username,n=e.password;return function(e){return e(me({authenticating:!0})),fe.a.post("/api/users/signin",{username:t,password:n}).then((function(t){e({type:j,payload:t.data})})).catch((function(t){e({type:x,payload:{for:"authenticating",msg:t.response.data.msg}})})).finally((function(){e(me({authenticating:!1}))}))}},toggleIsIsSignup:function(){return{type:g}}})((function(e){var t,n=e.onClose,c=e.hide,a=e.signUp,s=e.signIn,r=e.auth,i=e.ongoingOnServer,o=e.toggleIsIsSignup,u=r.isSignup,b=Object(l.useState)({username:"",password:""}),j=Object(Se.a)(b,2),x=j[0],h=j[1];Object(l.useEffect)((function(){(null===r||void 0===r?void 0:r.user)&&c()}),[null===r||void 0===r?void 0:r.user,c]);var f=function(e){var t=e.target;h(Object(d.a)(Object(d.a)({},x),{},Object(G.a)({},t.name,t.value)))},m=function(e){var t=e.name,n=e.type,l=e.label,c=e.placeholder,a=e.required;return t?Object(ye.jsxs)("div",{className:"flex flex-col space-y-2",children:[Object(ye.jsx)("div",{className:"flex justify-between text-sm font-semibold",children:Object(ye.jsx)("label",{htmlFor:t,className:"text-blue-500",children:l})}),Object(ye.jsx)(ze,{required:a,inputType:n||"text",onChange:f,value:x[t],name:t,className:"w-full h-12 px-2 rounded-md  placeholder-gray-400  bg-white text-lg focus-yellow hover:bg-gray-50",placeholder:c})]}):null};return Object(ye.jsxs)("div",{className:"bg-blue-100 w-full max-w-lg relative rounded-xl",children:[Object(ye.jsx)(ke,{type:"none",className:"absolute top-2 right-2 text-2xl rounded-full font-bold text-blue-500 p-2 hover:bg-blue-300",onClick:function(){n&&n(),c()},children:Object(ye.jsx)(ve.j,{})}),Object(ye.jsxs)("div",{className:"flex flex-col space-y-2 justify-center mb-6 px-4 pt-6 pb-3 bg-blue-200 bg-opacity-60 text-gray-700  rounded-t-xl",children:[Object(ye.jsx)("h2",{className:"text-3xl",children:"Welcome"}),Object(ye.jsxs)("p",{children:[u?"Already a member ?":"Don't have an account ?"," ",Object(ye.jsx)(ke,{type:"text",onClick:o,className:"inline-flex",children:u?"Sign In":"Sign Up"})]})]}),Object(ye.jsx)("form",{onSubmit:function(e){var t=x.username,n=x.password;e.preventDefault(),n&&t&&(u?a({username:t,password:n}):s({username:t,password:n}))},children:Object(ye.jsxs)("div",{className:"flex flex-col space-y-10",children:[Object(ye.jsxs)("div",{className:"flex flex-col space-y-6 px-4",children:[m({name:"username",placeholder:"username",label:"Username",required:!0}),m({name:"password",placeholder:"password",type:"password",label:"Password",required:!0})]}),"authenticating"===(null===r||void 0===r||null===(t=r.errMsg)||void 0===t?void 0:t.for)&&Object(ye.jsx)("p",{className:"text-red-500 text-sm font-semibold min-h-18 px-4",children:r.errMsg.msg}),Object(ye.jsxs)(ke,{className:"rounded-b-xl w-full h-12 bg-blue-500 text-white",type:"none",loading:i.authenticating,children:[i.authenticating?null:u?Object(ye.jsx)(ve.A,{}):Object(ye.jsx)(ve.s,{}),Object(ye.jsx)("span",{children:u?"Sign Up":"Sign In"})]})]})})]})})),Ye=function(e){var t=Fe(),n=Object(Se.a)(t,3),l=n[0],c=n[1],a=n[2];return Object(ye.jsxs)("div",{className:"relative",ref:a,children:[Object(ye.jsx)("div",{onClick:c,className:"text-base",children:e.children?e.children:Object(ye.jsx)(ve.v,{})}),l&&Object(ye.jsx)("div",{className:"z-30 origin-top-right absolute mt-2 -inset-x-40 w-48 rounded-md shadow-lg py-1 bg-white dark:bg-gray-900 ring-1 ring-black ring-opacity-5",role:"menu","aria-orientation":"vertical","aria-labelledby":"user-menu",children:e.options.map((function(e,t){return Object(ye.jsxs)("div",{className:"flex items-center space-x-2 px-4 py-2 text-sm text-gray-900 dark:text-white \n                ".concat(e.func?"hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer":"","\n                ").concat(e.isTitle?"font-semibold border-b":"","\n                "),onClick:function(){e.func&&(e.func(),c())},children:[e.icon&&Object(ye.jsx)("span",{className:"text-blue-500 text-lg",children:e.icon}),e.text&&Object(ye.jsx)("span",{children:e.text})]},t)}))})]})},Je=n(118),Ke=Object(r.b)((function(e){return{auth:e.auth}}),{signOut:function(){return/\/((sheet)|(user))\/.*/.test(ae.location.pathname)||ae.push(re),{type:m}}})((function(e){var t=e.auth,n=e.signOut,l=t.user,a=Me(),s=Object(Se.a)(a,3),r=s[0],i=s[1],o=s[2],d=function(){return Object(ye.jsx)(Ye,{options:[{text:null===l||void 0===l?void 0:l.username,func:null,isTitle:!0},{text:"My sheets",icon:Object(ye.jsx)(ve.p,{}),func:function(){var e;ae.push("".concat(se,"/").concat(null===t||void 0===t||null===(e=t.user)||void 0===e?void 0:e._id))}},{text:"My favorites",icon:Object(ye.jsx)(ve.e,{}),func:function(){ae.push(oe)}},{text:"Manage account",icon:Object(ye.jsx)(ve.m,{}),func:function(){ae.push(ie)}},{text:"Sign Out",func:n,icon:Object(ye.jsx)(ve.t,{})}],children:Object(ye.jsxs)(ke,{className:"bg-blue-200 text-blue-500 rounded-full p-3",type:"none",children:[Object(ye.jsx)(Je.a,{}),Object(ye.jsx)("span",{className:"sr-only",children:"Open user menu"})]})})},u=function(){return Object(ye.jsx)(c.a.Fragment,{children:Object(ye.jsxs)(ke,{type:"secondary",onClick:i,children:[Object(ye.jsx)("span",{className:"text-lg",children:Object(ye.jsx)(ve.s,{})}),Object(ye.jsx)("span",{children:"Sign in"})]})})};return Object(ye.jsxs)("div",{className:"mt-4 md:mt-0",children:[l?Object(ye.jsx)(d,{}):Object(ye.jsx)(u,{}),Object(ye.jsx)(r,{children:Object(ye.jsx)(We,{hide:o})})]})})),Qe=function(e){var t=e.large,n=void 0!==t&&t;return Object(ye.jsx)(Ve.a,{to:re,className:"group font-bold font-mono  grid grid-cols-5  text-blue-500 cursor-pointer text-2xl w-28 focus-yellow \n      ".concat(n?"md:text-6xl md:w-64":""),children:["c","h","e","a","t","s","h","e","e","t"].map((function(e,t){return Object(ye.jsx)("div",{className:"\n            border-blue-300 flex justify-center transition duration-300 ease-in-out group-hover:border-opacity-0\n            ".concat(t%5===0?"border-l-0":n?"border-l md:border-l-4":"border-l"," \n            ").concat(t>=5?"border-b-0":n?"border-b md:border-b-4":"border-b"," \n            "),children:e},t)}))})},Xe=function(){return Object(ye.jsxs)("header",{className:"flex justify-between items-center",children:[Object(ye.jsx)(Qe,{}),Object(ye.jsx)(Ke,{})]})},Ze=function(){return Object(ye.jsxs)("footer",{className:"mt-auto pb-2 pt-10 text-sm text-blue-500 flex flex-col items-center md:flex-row md:justify-between",children:[Object(ye.jsxs)("span",{children:["Developed By"," ",Object(ye.jsx)("a",{className:"underline focus-yellow",href:"https://mdtarhini.com",target:"_blank",rel:"noopener noreferrer",children:"MD. Tarhini"})]}),Object(ye.jsx)("a",{href:"https://github.com/mdtarhini/cheat-sheet-maker",className:"underline focus-yellow",target:"_blank",rel:"noopener noreferrer",children:"Code hosted on Github"})]})},$e=function(e){var t=e.children,n=e.withFooter,l=void 0!==n&&n;return Object(ye.jsx)("div",{className:"w-screen min-h-screen bg-gray-50 flex justify-center overflow-auto",children:Object(ye.jsxs)("div",{className:"w-full h-screen max-w-screen-2xl flex flex-col space-y-10 p-2",children:[Object(ye.jsx)(Xe,{}),t,l&&Object(ye.jsx)(Ze,{})]})})},et=function(){return Object(ye.jsx)($e,{withFooter:!0,children:Object(ye.jsxs)("div",{className:"flex-grow bg-blue-100 rounded-xl py-10 px-2 md:px-5 lg:px-10",children:[Object(ye.jsx)(qe,{}),Object(ye.jsx)("hr",{className:"my-6 border-0"}),Object(ye.jsx)(He,{listTitle:"Browse sheets"})]})})},tt=function(e){var t=e.type,n=e.text,l={info:{className:"bg-blue-100 border-blue-400 ",icon:Object(ye.jsx)(ve.q,{className:"text-blue-500"})},success:{className:"bg-yellow-green border-green-400 ",icon:Object(ye.jsx)(ve.i,{className:"text-green-500"})},warning:{className:"bg-yellow-100 border-yellow-400 ",icon:Object(ye.jsx)(ve.B,{className:"text-yellow-500"})},error:{className:"bg-red-100 border-red-400 ",icon:Object(ye.jsx)(ve.k,{className:"text-red-500"})}};return Object(ye.jsxs)("div",{className:"w-full border p-3 md:p-7 flex items-center space-x-2 md:space-x-6 \n      ".concat(t?l[t].className:""),children:[Object(ye.jsx)("div",{className:"flex-shrink-0 text-2xl md:text-4xl",children:l[t].icon}),Object(ye.jsx)("p",{className:"md:text-lg",children:n})]})},nt={blue:"blue",green:"green",red:"red",mango:"mango",indigo:"indigo",gray:"gray"},lt={zero:"-0",thin:"",thick:"-2"},ct={none:"none",small:"sm",large:"lg",xlarge:"xl"},at={none:{label:"None",prismValue:"text"},bash:{label:"Bash",prismValue:"bash"},c:{label:"C",prismValue:"c"},cpp:{label:"C++",prismValue:"cpp"},csharp:{label:"C#",prismValue:"csharp"},coffeescript:{label:"CoffeeScript",prismValue:"coffeescript"},css:{label:"CSS",prismValue:"css"},dart:{label:"Dart",prismValue:"dart"},elixir:{label:"Elixir",prismValue:"elixir"},fortran:{label:"Fortran",prismValue:"fortran"},go:{label:"Go",prismValue:"go"},graphql:{label:"GraphQl",prismValue:"graphql"},groovy:{label:"Groovy",prismValue:"groovy"},handlebars:{label:"Handlebars",prismValue:"handlebars"},haskell:{label:"Haskell",prismValue:"haskell"},html:{label:"HTML",prismValue:"markup"},java:{label:"Java",prismValue:"java"},javascript:{label:"JavaScript",prismValue:"javascript"},json:{label:"JSON",prismValue:"json"},jsx:{label:"JSX",prismValue:"jsx"},koltin:{label:"Koltin",prismValue:"koltin"},latex:{label:"Latex",prismValue:"latex"},markdown:{label:"Markdown",prismValue:"markdown"},mongodb:{label:"MongoDB",prismValue:"mongodb"},matlab:{label:"Matlab",prismValue:"matlab"},objectivec:{label:"Objective-C",prismValue:"objectivec"},pascal:{label:"Pascal",prismValue:"pascal"},perl:{label:"Perl",prismValue:"perl"},php:{label:"PHP",prismValue:"php"},python:{label:"Python",prismValue:"python"},r:{label:"R",prismValue:"r"},regex:{label:"Regex",prismValue:"regex"},ruby:{label:"Ruby",prismValue:"ruby"},rust:{label:"Rust",prismValue:"rust"},sass:{label:"Sass",prismValue:"sass"},scala:{label:"Scala",prismValue:"scala"},sql:{label:"SQL",prismValue:"sql"},swift:{label:"Swift",prismValue:"swift"},typescript:{label:"TypeScript",prismValue:"typescript"},yalm:{label:"Yaml",prismValue:"yaml"}},st=n(119),rt=n.n(st),it=n(120),ot=n.n(it),dt=n(505),ut=n(504),bt=function(e){var t=e.makerMode,n=e.title,l=e.rows,c=e.theme,a=e.corners,s=e.borders;return Object(ye.jsxs)("div",{className:"w-full",children:[(t||n)&&Object(ye.jsx)("div",{className:"w-full h-12 flex  items-center justify-center\n            bg-".concat(nt[c],"-500 \n            rounded-t-").concat(ct[a]," \n            border").concat(lt[s]," \n            border-b-0 border-").concat(nt[c],"-600"),children:Object(ye.jsx)("h3",{className:"text-xl text-gray-50 font-bold \n              ".concat(n?"opacity-100":"opacity-25"),children:n||"cell title"})}),Object(ye.jsx)("div",{className:"w-full",children:l.map((function(e,n){return e.value||t?Object(ye.jsx)("div",{className:"prose break-words whitespace-pre-wrap w-full max-w-full px-2 \n                  border-l".concat(lt[s]," \n                  border-r").concat(lt[s]," \n                  border-").concat(nt[c],"-600\n                  bg-").concat(nt[c],"-").concat(n%2===0?"50":"200","\n                  ").concat(e.value?"py-2":"py-5"," \n                  ").concat(n===l.length-1?"rounded-b-".concat(ct[a]," border-b").concat(lt[s]):""),children:Object(ye.jsx)(rt.a,{allowDangerousHtml:!0,language:"js",sourcePos:!0,renderers:(r=at[e.lang].prismValue,{code:function(e){var t=e.value;return t?Object(ye.jsx)(dt.a,{style:ut.a,wrapLongLines:!0,language:r,children:t,customStyle:{backgroundColor:"#ffffff28",fontSize:"16px",overflow:"hidden",borderLeft:"4px solid gray",borderRadius:"0px",padding:"3px 8px"}}):null}}),children:e.value,plugins:[ot.a]})},n):null;var r}))})]})},jt=Object(r.b)((function(e){return{sheets:e.sheets,auth:e.auth,ongoingOnServer:e.ongoingOnServer}}),{getOneSheet:function(e){return function(t){return t(me({"getting-one-sheet":!0})),fe.a.get("/api/sheets/one-public-sheet/".concat(e)).then((function(e){t({type:z,payload:e.data})})).catch((function(e){t({type:q,payload:e.response.data.msg})})).finally((function(){t(me({"getting-one-sheet":!1}))}))}},toggleFavorites:ge})((function(e){var t=e.match,n=e.sheets,c=e.getOneSheet,a=e.auth,s=e.ongoingOnServer,r=e.toggleFavorites,i=Me(),o=Object(Se.a)(i,3),u=o[0],b=o[1],j=o[2],x=Object(l.useState)(0),h=Object(Se.a)(x,2),f=h[0],m=h[1],p=Object(l.useState)({}),O=Object(Se.a)(p,2),g=O[0],v=O[1],y=function(){var e=Object(l.useState)({width:void 0,height:void 0}),t=Object(Se.a)(e,2),n=t[0],c=t[1];return Object(l.useEffect)((function(){c({width:window.innerWidth,height:window.innerHeight})}),[]),n}(),w=null===y||void 0===y?void 0:y.width,N=t.params.id,S=(null===n||void 0===n?void 0:n.data)?n.data[N]:null;Object(l.useEffect)((function(){(null===n||void 0===n?void 0:n.data[N])||c(N)}),[N,null===n||void 0===n?void 0:n.data,c]);var C=Object(l.useState)(null),E=Object(Se.a)(C,2),I=E[0],T=E[1];Object(l.useEffect)((function(){var e=Number(null===S||void 0===S?void 0:S.maxCols);e>2&&w<1280&&(e=2),T(e)}),[S,w]);var _=null===S||void 0===S?void 0:S.cells.map((function(e,t){return Object(d.a)(Object(d.a)({},e),{},{id:t})})),M=Object(l.useRef)();Object(l.useEffect)((function(){f>=0&&_&&M.current&&(v((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(G.a)({},M.current.id,M.current.clientHeight))})),m(f+1),f===_.length-1&&m(-1))}),[f,_]);var V=function(){var e=S.title,n=S.favorites,l=S.theme,c=S.corners,s=S.borders,i=S.authorId,o=function(){var c,s,o;return t.path.includes(xe)?null:Object(ye.jsxs)("div",{className:"flex space-x-3",children:[(null===a||void 0===a||null===(c=a.user)||void 0===c?void 0:c._id)===i&&Object(ye.jsx)(ke,{type:"none",className:" w-7 h-7 md:w-10 md:h-10 md:text-xl rounded-full bg-".concat(nt[l],"-200 text-").concat(nt[l],"-500 "),title:"edit",onClick:function(){ae.push("".concat(de,"/").concat(N))},children:Object(ye.jsx)(ve.m,{})}),(null===a||void 0===a?void 0:a.user)&&Object(ye.jsx)(ke,{className:" w-7 h-7 md:w-10 md:h-10 md:text-xl rounded-full bg-".concat(nt[l],"-200 text-").concat(nt[l],"-500 "),type:"none",title:(null===a||void 0===a?void 0:a.user)?n.includes(null===a||void 0===a||null===(s=a.user)||void 0===s?void 0:s._id)?"remove from favorites":"add to favorites":"",onClick:function(){r(N)},children:n.includes(null===a||void 0===a||null===(o=a.user)||void 0===o?void 0:o._id)?Object(ye.jsx)(ve.e,{}):Object(ye.jsx)(ve.y,{})}),Object(ye.jsx)(ke,{className:" w-7 h-7 md:w-10 md:h-10 md:text-xl rounded-full bg-".concat(nt[l],"-200 text-").concat(nt[l],"-500 "),type:"none",onClick:b,children:Object(ye.jsx)(Le.b,{})}),Object(ye.jsx)(u,{children:Object(ye.jsx)(Ie,{hide:j,sheetId:N,sheetTitle:e})})]})};return Object(ye.jsxs)("div",{className:"w-full px-2 py-3 md:px-6 text-white flex flex-col items-center md:flex-row  md:justify-between overflow-hidden \n      border".concat(lt[s]," \n      bg-").concat(nt[l],"-500 \n      border-").concat(nt[l],"-600 \n      rounded-").concat(ct[c]),children:[Object(ye.jsxs)("div",{className:"flex flex-col space-y-2",children:[Object(ye.jsx)("h1",{className:"text-xl font-bold md:text-2xl lg:text-3xl",children:e}),Object(ye.jsxs)("div",{className:"flex space-x-5 items-center justify-center md:justify-start",children:[Object(ye.jsxs)("p",{className:"font-semibold",children:["By"," ",Object(ye.jsx)(Ve.a,{to:"".concat(se,"/").concat(S.authorId),className:"underline",children:S.authorUsername})]}),Object(ye.jsx)("div",{className:"md:hidden",children:o()})]})]}),Object(ye.jsx)("div",{className:"hidden md:block",children:o()})]})};return Object(ye.jsx)($e,{children:s["getting-one-sheet"]?Object(ye.jsx)(Ae,{}):n.errMsg?Object(ye.jsx)(tt,{type:"error",text:null===n||void 0===n?void 0:n.errMsg}):f>=0?function(){if(!S||!_||!I)return null;var e=S.theme,t=S.corners,n=S.borders,l=_[f];return Object(ye.jsx)("div",{ref:M,id:l.id,className:"opacity-0 md:px-1 lg:px-3 xl:px-4 ".concat(1===I?"lg:w-full":2===I?"lg:w-1/2":"lg:w-1/2 xl:w-1/3"),children:Object(ye.jsx)(bt,{makerMode:!1,title:l.title,theme:e,corners:t,borders:n,rows:l.rows})})}():function(){if(!S)return null;var e=S.theme,n=S.corners,l=S.borders,c=function(){if(_){var e=Object(k.a)(Array(I).keys()).map((function(){return[]})),t=[],n=Object.keys(g).reduce((function(e,t){return e+g[t]}),0)/I,l=0,c=0;Object.keys(g).forEach((function(t){var a=g[t];c+a>n&&l<I-1&&(l++,c=0),c+=a,e[l].push(_[_.findIndex((function(e){return e.id.toString()===t}))])}));for(var a=function(e){return e.reduce((function(e,t){return e+g[t.id]}),0)},s=function(){for(var t=0;t<I-1;t++)if(1.05*a(e[t])<a(e[t+1]))return!1;return!0};!s();)for(var r=0;r<I-1;r++)1.05*a(e[r])<a(e[r+1])&&e[r].push(e[r+1].shift());return I>1&&a(e[0])-g[0]>a(e[1])&&t.push(e[0].shift()),[t,e]}}(),a=Object(Se.a)(c,2),s=a[0],r=a[1];return Object(ye.jsxs)("div",{className:"pb-10",children:[t.path==="".concat(xe,"/:id")&&Object(ye.jsx)("div",{className:"w-full mb-4 flex items-center justify-center",children:Object(ye.jsxs)(Ve.a,{className:"flex space-x-2 py-2 px-3 items-center bg-blue-500 text-white font-semibold rounded-md focus-yellow",to:"".concat(de,"/").concat(N),children:[Object(ye.jsx)(Le.a,{}),Object(ye.jsx)("span",{children:"Back to editor"})]})}),Object(ye.jsxs)("main",{className:"rounded-sm shadow-sm py-10 px-2 md:px-5 lg:px-10 bg-white",children:[V(),Object(ye.jsxs)("section",{className:"w-full mt-4 flex flex-col space-y-5",children:[s[0]&&Object(ye.jsx)("div",{className:"w-full flex flex-col space-y-5",children:s.map((function(t){return Object(ye.jsx)(bt,{makerMode:!1,title:t.title,theme:e,corners:n,borders:l,rows:t.rows},t.id)}))}),Object(ye.jsx)("div",{className:"md:mt-8 flex flex-wrap lg:flex-nowrap space-y-5 lg:space-y-0 space-x-0 lg:space-x-6 xl:space-x-8",children:r.map((function(t,c){return Object(ye.jsx)("div",{className:"w-full flex flex-col space-y-5 ".concat(1===I?"lg:w-full":2===I?"lg:w-1/2":"lg:w-1/2 xl:w-1/3"),children:t.map((function(t){return Object(ye.jsx)(bt,{makerMode:!1,title:t.title,theme:e,corners:n,borders:l,rows:t.rows},t.id)}))},c)}))})]})]})]})}()})})),xt=Object(r.b)((function(e){return{sheets:e.sheets}}),{})((function(e){var t=e.sheets,n=Z(null===t||void 0===t?void 0:t.data,(function(e){return!e.published}));return n&&Object.keys(n).length>0?Object(ye.jsxs)("section",{children:[Object(ye.jsx)(Re,{level:2,text:"My non published sheets",className:"mb-5"}),Object(ye.jsx)("div",{className:"mt-5 w-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8 place-content-between",children:Object.keys(n).map((function(e){return Object(ye.jsx)(Ue,{sheet:n[e]},e)}))})]}):null})),ht=Object(r.b)((function(e){return{auth:e.auth}}),{getNonPublishedSheets:function(){return function(e,t){var n;e(me({"getting-non-published-sheets":!0})),fe.a.get("/api/sheets/non-published",pe(null===(n=t().auth)||void 0===n?void 0:n.token)).then((function(t){e({type:J,payload:t.data})})).finally((function(){e(me({"getting-non-published-sheets":!1}))}))}}})((function(e){var t,n,c=e.match,a=e.auth,s=e.getNonPublishedSheets,r=c.params.id,i=function(e){var t=Object(l.useState)({}),n=Object(Se.a)(t,2),c=n[0],a=n[1];return Object(l.useEffect)((function(){var t=!0;return e&&fe.a.get("/api/users/user-info/".concat(e)).then((function(e){t&&a(e.data)})),function(){t=!1}}),[e]),c}(r);return Object(l.useEffect)((function(){var e;(null===a||void 0===a||null===(e=a.user)||void 0===e?void 0:e._id)===r&&s()}),[s,a,r]),Object(ye.jsx)($e,{children:Object(ye.jsx)("div",{className:"pb-10 flex-grow flex flex-col",children:Object(ye.jsxs)("main",{className:"flex-grow bg-blue-100 rounded-xl py-10 px-2 md:px-5 lg:px-10",children:[Object(ye.jsx)(He,{listTitle:(null===i||void 0===i?void 0:i._id)?(null===i||void 0===i?void 0:i._id)===(null===a||void 0===a||null===(t=a.user)||void 0===t?void 0:t._id)?"My published sheets":"Sheets made by ".concat(null===i||void 0===i?void 0:i.username):""}),(null===a||void 0===a||null===(n=a.user)||void 0===n?void 0:n._id)===r&&Object(ye.jsx)(xt,{})]})})})})),ft=Object(r.b)((function(e){return{auth:e.auth,ongoingOnServer:e.ongoingOnServer}}),{editPassword:function(e){var t=e.newPassword,n=e.oldPassword;return function(e,l){if(t&&n)return e(me({"editing-password":!0})),fe.a.patch("/api/users/edit-password",{newPassword:t,oldPassword:n},pe(l().auth.token)).then((function(t){e({type:p,payload:t.data})})).catch((function(t){e({type:O,payload:{for:"editing-password",msg:t.response.data.msg}})})).finally((function(){e(me({"editing-password":!1}))}))}},deleteUser:function(e){return function(t,n){if(e)return t(me({"deleting-user":!0})),fe.a.delete("/api/users/delete-user",Object(d.a)(Object(d.a)({},pe(n().auth.token)),{},{data:{password:e}})).then((function(e){t({type:v}),ae.push(re)})).catch((function(e){t({type:y,payload:{for:"deleting-user",msg:e.response.data.msg}})})).finally((function(){t(me({"deleting-user":!1}))}))}}})((function(e){var t=e.auth,n=e.ongoingOnServer,c=e.editPassword,a=e.deleteUser,s=Object(l.useState)({"password-for-delete":"","old-password":"","new-password":""}),r=Object(Se.a)(s,2),i=r[0],o=r[1],u=function(e){var n,l=e.label,c=e.inputName,a=e.inputType,s=void 0===a?"text":a,r=e.errKey,u=void 0===r?"":r;return Object(ye.jsxs)("div",{className:"flex flex-col space-y-1",children:[Object(ye.jsxs)("div",{className:"w-full md:w-96 flex items-stretch",children:[Object(ye.jsx)("div",{className:"bg-gray-100 w-1/4 max-w-24 flex-shrink-0 p-1 flex justify-center items-center rounded-l-md",children:Object(ye.jsx)("label",{className:"text-gray-600 font-semibold",htmlFor:c,children:l})}),Object(ye.jsx)(ze,{value:i[c],name:c,id:c,extra:"rounded-l-none w-full",inputType:s,onChange:function(e){o((function(t){return Object(d.a)(Object(d.a)({},t),{},Object(G.a)({},c,e.target.value))}))}})]}),(null===t||void 0===t||null===(n=t.errMsg)||void 0===n?void 0:n.for)===u&&Object(ye.jsx)("p",{className:"text-red-500 font-semibold text-sm",children:t.errMsg.msg})]})};return Object(ye.jsx)($e,{children:(null===t||void 0===t?void 0:t.user)?Object(ye.jsxs)("main",{className:"bg-blue-100 rounded-xl py-10 px-2 md:px-5 lg:px-10 flex flex-col space-y-6",children:[Object(ye.jsx)("h1",{className:"text-xl md:text-2xl text-blue-500 font-semibold",children:"Manage your account"}),Object(ye.jsxs)("div",{className:"flex flex-col space-y-2",children:[Object(ye.jsx)("h2",{className:"text-lg  text-gray-700 font-semibold",children:"Change your password"}),Object(ye.jsxs)("div",{className:"flex flex-col space-y-2 ",children:[u({inputType:"password",label:"old",inputName:"old-password"}),Object(ye.jsxs)("div",{className:"flex flex-col md:flex-row space-y-2 md:space-y-0 md:space-x-2",children:[u({inputType:"password",label:"new",inputName:"new-password",errKey:"editing-password"}),Object(ye.jsx)(ke,{type:"primary",className:"h-12",disabled:!i["old-password"]||!i["new-password"],loading:n["editing-password"],onClick:function(){c({oldPassword:i["old-password"],newPassword:i["new-password"]})},children:"Update"})]})]})]}),Object(ye.jsxs)("div",{className:"flex flex-col space-y-2",children:[Object(ye.jsx)("h2",{className:"text-lg  text-red-500 font-semibold",children:"Delete your account"}),Object(ye.jsxs)("div",{className:"flex flex-col md:flex-row  space-y-2 md:space-y-0 md:space-x-2",children:[u({inputType:"password",label:"password",inputName:"password-for-delete",errKey:"deleting-user"}),Object(ye.jsx)(ke,{type:"primary",className:"h-12",loading:n["deleting-user"],disabled:!i["password-for-delete"],color:"red",onClick:function(){a(i["password-for-delete"])},children:"Delete"})]})]})]}):Object(ye.jsx)(tt,{type:"error",text:"You need to be signed in to view this page"})})})),mt=Object(r.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.auth;return Object(ye.jsx)($e,{children:(null===t||void 0===t?void 0:t.user)?Object(ye.jsx)("div",{className:"flex-grow bg-blue-100 rounded-xl py-10 px-2 md:px-5 lg:px-10",children:Object(ye.jsx)(He,{listTitle:"My favorites sheets"})}):Object(ye.jsx)(tt,{type:"error",text:"You need to sign in to view this page"})})})),pt=function(e){return function(t,n){var l;if(!(null===(l=n().sheets)||void 0===l?void 0:l.data[e]))return t(me({"getting-sheet-for-maker":!0})),fe.a.get("/api/sheets/one-private-sheet/".concat(e),pe(n().auth.token)).then((function(e){t({type:P,payload:e.data})})).catch((function(e){t({type:"SET_SHEET_FAILED",payload:e.response.data.msg})})).finally((function(){t(me({"getting-sheet-for-maker":!1}))}));t({type:P,payload:n().sheets.data[e]})}},Ot=function(e,t,n){return function(l,c){var a;return l(me({"saving-sheet":!0})),fe.a.patch("/api/sheets/".concat(e),t,pe(null===(a=c().auth)||void 0===a?void 0:a.token)).then((function(e){l({type:R,payload:e.data}),n&&ae.push(n)})).catch((function(e){l({type:"UPDATE_SHEET_FAILED",payload:e.response.data.msg})})).finally((function(){l(me({"saving-sheet":!1}))}))}},gt=Object(r.b)((function(e){return{auth:e.auth,ongoingOnServer:e.ongoingOnServer,sheetMaker:e.sheetMaker}}),{updateSheet:Ot,createSheet:function(e){return function(t,n){var l;return t(me({"saving-sheet":!0})),fe.a.post("/api/sheets/new",e,pe(null===(l=n().auth)||void 0===l?void 0:l.token)).then((function(e){ae.push("".concat(de,"/").concat(e.data))})).catch((function(){})).finally((function(){t(me({"saving-sheet":!1}))}))}},getAndSetSheet:pt})((function(e){var t,n=e.auth,c=e.match,a=e.updateSheet,s=e.createSheet,r=e.ongoingOnServer,i=e.sheetMaker,o=Me(),u=Object(Se.a)(o,3),b=u[0],j=u[1],x=u[2],h=null===c||void 0===c||null===(t=c.params)||void 0===t?void 0:t.id,f=null===i||void 0===i?void 0:i.authorId,m=Object(l.useState)({title:"",maxCols:"2",defaultLang:"javascript",theme:"blue",borders:"zero",corners:"none"}),p=Object(Se.a)(m,2),O=p[0],g=p[1];Object(l.useEffect)((function(){n.user||j()}),[n,j]),Object(l.useEffect)((function(){if(c.path!==ue)if(null===i||void 0===i?void 0:i.title){var e=i.maxCols,t=i.title,n=i.corners,l=i.defaultLang,a=i.theme,s=i.borders;g((function(c){return Object(d.a)(Object(d.a)({},c),{},{maxCols:e,title:t,corners:n,defaultLang:l,borders:s,theme:a})}))}else ae.push("".concat(de,"/").concat(h))}),[i,c,h]);var v=function(e){var t=e.target;g(Object(d.a)(Object(d.a)({},O),{},Object(G.a)({},t.name,t.value)))},y=function(e){e.preventDefault(),c.path===ue?ae.push(re):ae.push("".concat(de,"/").concat(h))},w=function(e){e.preventDefault(),c.path===ue?s(Object(d.a)({},O)):a(h,Object(d.a)(Object(d.a)({},O),{},{cells:i.cells}),"".concat(de,"/").concat(h))},N=function(){return Object(ye.jsx)("div",{className:"flex flex-wrap",children:["1","2","3"].map((function(e){return Object(ye.jsxs)("label",{className:"relative flex items-center  space-x-2 bg-gray-300 text-gray-700 px-2 py-1 rounded-md mr-6",children:[Object(ye.jsx)("input",{onChange:v,checked:O.maxCols===e,type:"radio",name:"maxCols",value:e,id:e}),Object(ye.jsx)("span",{htmlFor:e,children:e})]},e)}))})},k=function(){var e=Object.keys(at).map((function(e){return{value:e,label:at[e].label}}));return Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)("label",{htmlFor:"defaultLang",className:"text-blue-500 text-sm font-semibold",children:"Default language for code highlighting"}),Object(ye.jsx)("div",{className:"w-full md:w-72 h-10",children:Object(ye.jsx)(Ge,{value:O.defaultLang,id:"defaultLang",options:e,searchable:!0,onValueChange:function(e){return g(Object(d.a)(Object(d.a)({},O),{},{defaultLang:e}))},buttonClassName:"rounded-md "})})]})},S=function(){return Object(ye.jsx)("div",{className:"flex flex-wrap",children:Object.keys(nt).map((function(e){return Object(ye.jsxs)("div",{className:"relative flex flex-col justify-center items-center mr-3 mb-2",children:[Object(ye.jsx)("input",{className:"absolute",onChange:v,checked:O.theme===e,type:"radio",name:"theme",id:e,value:e}),Object(ye.jsx)("label",{htmlFor:e,children:Object(ye.jsxs)("div",{className:"border-2 rounded-sm overflow-hidden border-".concat(nt[e],"-600"),children:[Object(ye.jsx)("span",{className:"sr-only",children:e}),Object(ye.jsx)("div",{className:"w-20 h-6 flex justify-center items-center text-sm bg-".concat(nt[e],"-500")}),Object(ye.jsx)("div",{className:"w-20 h-6 bg-".concat(nt[e],"-50")}),Object(ye.jsx)("div",{className:"w-20 h-6 bg-".concat(nt[e],"-200")})]})})]},e)}))})},C=function(){return Object(ye.jsx)("div",{className:"flex flex-wrap",children:Object.keys(lt).map((function(e){return Object(ye.jsxs)("div",{className:"relative flex flex-col justify-center items-center mr-3 mb-2",children:[Object(ye.jsx)("input",{onChange:v,checked:O.borders===e,className:"absolute",type:"radio",name:"borders",value:e,id:e}),Object(ye.jsx)("label",{htmlFor:e,children:Object(ye.jsx)("div",{className:"w-20 h-14 flex justify-center text-sm bg-gray-300 border-gray-700 \n                  border".concat(lt[e]),children:Object(ye.jsx)("span",{className:"sr-only",children:e})})})]},e)}))})},E=function(){return Object(ye.jsx)("div",{className:"flex flex-wrap",children:Object.keys(ct).map((function(e){return Object(ye.jsxs)("div",{className:"relative flex flex-col justify-center items-center mr-3 mb-2",children:[Object(ye.jsx)("input",{onChange:v,checked:O.corners===e,className:"absolute",type:"radio",name:"corners",value:e,id:e}),Object(ye.jsx)("label",{htmlFor:e,children:Object(ye.jsx)("div",{className:"w-20 h-14 flex justify-center text-sm bg-gray-400 rounded-".concat(ct[e]),children:Object(ye.jsx)("span",{className:"sr-only",children:e})})})]},e)}))})},I=function(){return Object(ye.jsx)("main",{className:"bg-blue-100 rounded-xl py-10 px-2 md:px-5 lg:px-10",children:Object(ye.jsx)("form",{onSubmit:w,children:Object(ye.jsxs)("div",{className:"flex flex-col space-y-8",children:[Object(ye.jsx)("div",{className:"flex flex-col space-y-1",children:Object(ye.jsxs)(ye.Fragment,{children:[Object(ye.jsx)("label",{htmlFor:"title",className:"text-blue-500 text-sm font-semibold",children:"Sheet title"}),Object(ye.jsx)("input",{type:"text",required:!0,onChange:v,value:O.title,name:"title",className:"w-full h-12 px-2 rounded-md  placeholder-gray-400  bg-white text-lg focus-yellow hover:bg-gray-50",placeholder:"Title "})]})}),Object(ye.jsx)("div",{className:"flex flex-col space-y-1",children:k()}),[{id:"layout",legend:"Maximum number of columns",group:N},{id:"theme",legend:"Cell color theme",group:S},{id:"borders",legend:"Cell borders",group:C},{id:"corners",legend:"Cell corners",group:E}].map((function(e){return Object(ye.jsxs)("fieldset",{className:"flex flex-col space-y-1",children:[Object(ye.jsx)("legend",{className:"text-sm font-semibold text-blue-500",children:e.legend}),e.group()]},e.id)})),Object(ye.jsxs)("fieldset",{className:"w-full flex items-center justify-center md:justify-end space-x-2",children:[Object(ye.jsx)(ke,{onClick:y,type:"open",color:"red",children:"Cancel"}),Object(ye.jsx)(ke,{type:"primary",loading:r["saving-sheet"],children:Object(ye.jsx)("span",{children:c.path===ue?"Continue":"Save"})})]})]})})})};return Object(ye.jsx)($e,{children:Object(ye.jsxs)("div",{children:[function(){return c.path===ue?I():(null===n||void 0===n?void 0:n.user)?(null===n||void 0===n||null===(e=n.user)||void 0===e?void 0:e._id)===f?I():Object(ye.jsx)("main",{children:Object(ye.jsx)(tt,{type:"error",text:"You are not authorized to edit this sheet"})}):Object(ye.jsx)("main",{children:Object(ye.jsx)(tt,{type:"error",text:"Please sign in to view this page"})});var e}(),Object(ye.jsx)(b,{children:Object(ye.jsx)(We,{onClose:function(){ae.push(re)},hide:x})})]})})})),vt=Object(r.b)((function(e){return{sheetMaker:e.sheetMaker}}),{moveRowDown:function(e,t){return{type:V,payload:{cellId:e,rowIndex:t}}},moveRowUp:function(e,t){return{type:M,payload:{cellId:e,rowIndex:t}}},updateRow:function(e,t,n){return{type:U,payload:{cellId:t,rowId:e,update:n}}},deleteRow:function(e,t){return{type:D,payload:{cellId:e,rowId:t}}}})((function(e){var t=e.rowId,n=e.rowIndex,c=e.cellId,a=e.cellIndex,s=e.moveRowDown,r=e.moveRowUp,i=e.updateRow,o=e.deleteRow,d=e.sheetMaker.cells,u=Me(),b=Object(Se.a)(u,2),j=b[0],x=b[1],h=d[a].rows[n].value,f=d[a].rows[n].lang,m=Object(l.useRef)();Object(l.useEffect)((function(){var e=h?(h.match(/\n/g)||[]).length+1:3;e<3&&(e=3);var t=20*e+20;m.current.style.height=t+"px"}),[h]);var p=function(){var e=Object.keys(at).map((function(e){return{value:e,label:at[e].label}}));return Object(ye.jsxs)("div",{className:"w-44 p-px h-full flex items-center",children:[Object(ye.jsx)("div",{className:"h-full flex items-center justify-center p-1 bg-gray-500 text-gray-200 border-r border-gray-400",children:Object(ye.jsx)(Be.a,{})}),Object(ye.jsx)("div",{className:"h-full",children:Object(ye.jsx)(Ge,{value:f,options:e,searchable:!0,onValueChange:function(e){return i(t,c,{lang:e})},buttonClassName:"rounded-none bg-gray-500 text-white placeholder-white",menuClassName:"text-xs"})})]})};return Object(ye.jsxs)("div",{className:"w-full border-2",children:[Object(ye.jsxs)("div",{className:"w-full h-8 flex items-center justify-between bg-gray-600",children:[Object(ye.jsxs)("div",{className:"flex items-center justify-start space-x-px h-full",children:[Object(ye.jsx)(ke,{className:"bg-gray-500 text-white w-8 h-full",type:"none",onClick:function(){return r(c,n)},title:"move up",children:Object(ye.jsx)(ve.g,{})}),Object(ye.jsx)(ke,{className:"bg-gray-500 text-white w-8 h-full",type:"none",onClick:function(){return s(c,n)},title:"move down",children:Object(ye.jsx)(ve.f,{})})]}),/```/.test(h)&&p(),Object(ye.jsx)(ke,{className:"bg-red-500 text-white w-8 h-full",type:"none",title:"delete",onClick:function(){h?x():o(c,t)},children:Object(ye.jsx)(ve.a,{})})]}),Object(ye.jsx)("textarea",{ref:m,autoFocus:!0,value:h,onChange:function(e){return i(t,c,{value:e.target.value})},className:"w-full p-3 focus-yellow resize-none leading-5",placeholder:"row content in markdown"}),Object(ye.jsx)(j,{onOk:function(){o(c,t)},icon:Object(ye.jsx)(ve.a,{}),title:Object(ye.jsx)("span",{children:"Are you sure you want to remove this row ? "}),okText:"Remove"})]})})),yt=Object(r.b)((function(e){return{sheetMaker:e.sheetMaker}}),{addRow:function(e){return{type:L,payload:e}},setCellTitle:function(e,t){return{type:T,payload:{cellId:e,value:t}}}})((function(e){var t,n,c=e.addRow,a=e.sheetMaker,s=e.setCellTitle,r=a.cells,i=a.selectedCell,o=Object(l.useRef)();Object(l.useEffect)((function(){o.current&&o.current.scrollIntoView({behavior:"smooth"})}),[r]);var d=r.findIndex((function(e){return e.id===i}));return Object(ye.jsxs)("div",{className:"w-full h-full bg-blue-100 flex flex-col space-y-3 items-start p-2 overflow-auto",children:[Object(ye.jsx)("div",{className:"hidden md:flex w-full justify-center items-center p-1 text-blue-500 font-semibold bg-blue-200 bg-opacity-50",children:Object(ye.jsx)("h2",{children:"Cell editor"})}),r[d]?Object(ye.jsxs)("div",{className:"w-full",children:[Object(ye.jsx)("div",{className:"flex items-center",children:Object(ye.jsx)("input",{name:"cell-title","aria-label":"cell-title",value:null===(t=r[d])||void 0===t?void 0:t.title,onChange:function(e){return s(i,e.target.value)},className:"flex-grow h-12 p-2 border-2 focus-yellow",placeholder:"cell title..."})}),Object(ye.jsx)("div",{className:"my-2 flex flex-col space-y-1",children:null===(n=r[d])||void 0===n?void 0:n.rows.map((function(e,t){return Object(ye.jsx)(vt,{rowId:e.id,cellId:i,cellIndex:d,rowIndex:t},e.id)}))}),Object(ye.jsx)("div",{className:"w-full flex justify-center items-center",ref:o,children:Object(ye.jsx)(ke,{className:"w-full font-bold",type:"open",onClick:function(){c(i)},children:"New row"})})]}):null]})})),wt=Object(r.b)((function(e){return{sheetMaker:e.sheetMaker}}))((function(e){var t=e.sheetMaker,n=t.cells,l=t.selectedCell,c=t.theme,a=t.corners,s=t.borders,r=n.findIndex((function(e){return e.id===l}));return Object(ye.jsxs)("div",{className:"w-full h-full bg-blue-100 flex flex-col space-y-3 mb-10 p-2 overflow-auto",children:[Object(ye.jsx)("div",{className:"flex justify-center items-center p-1 text-blue-500 font-semibold bg-blue-200 bg-opacity-50",children:Object(ye.jsx)("h2",{children:"Cell preview"})}),n[r]&&Object(ye.jsx)(bt,{makerMode:!0,theme:c,corners:a,borders:s,title:n[r].title,rows:n[r].rows})]})})),Nt=Object(r.b)((function(e){return{sheetMaker:e.sheetMaker,auth:e.auth,ongoingOnServer:e.ongoingOnServer}}),{updateSheet:Ot,deleteSheet:function(e,t){return function(n,l){var c;return n(me({"deleting-sheet":!0})),fe.a.delete("/api/sheets/".concat(e),pe(null===(c=l().auth)||void 0===c?void 0:c.token)).then((function(){n({type:A,payload:e}),ae.push(t)})).catch((function(){n({type:"DELETE_SHEET_FAILED",payload:e})})).finally((function(){n(me({"deleting-sheet":!1}))}))}}})(Object(le.f)((function(e){var t=e.sheetId,n=e.sheetMaker,l=e.ongoingOnServer,c=e.updateSheet,a=e.deleteSheet,s=e.location,r=n.cells,i=n.title,o=n.published,d=Fe(),u=Object(Se.a)(d,3),b=u[0],j=u[1],x=u[2],h=Me(),f=Object(Se.a)(h,2),m=f[0],p=f[1],O=function(){var e=[{id:"settings",label:"Settings",color:"gray",func:function(){ae.push("".concat(be,"/").concat(t))},icon:Object(ye.jsx)(ve.d,{})},{id:"save",label:"Save and quit",color:"gray",func:function(){var e;c(t,{cells:r},(null===s||void 0===s||null===(e=s.state)||void 0===e?void 0:e.prevPathname)||re)},icon:Object(ye.jsx)(ve.c,{})},{id:"preview",label:"Sheet Preview",color:"gray",func:function(){c(t,{cells:r},"/sheet-preview/".concat(t))},icon:Object(ye.jsx)(ve.b,{})},o?{id:"unpublish",label:"Unpublish",color:"yellow",func:function(){var e;c(t,{cells:r,published:!1},(null===s||void 0===s||null===(e=s.state)||void 0===e?void 0:e.prevPathname)||re)},icon:Object(ye.jsx)(ve.j,{})}:{id:"publish",label:"Publish",color:"green",func:function(){c(t,{cells:r,published:!0},"/")},icon:Object(ye.jsx)(ve.h,{})},{id:"delete",label:"Delete",color:"red",func:function(){p()},icon:Object(ye.jsx)(ve.a,{})}];return l["saving-sheet"]?Object(ye.jsxs)("p",{className:"text-blue-500 font-semibold",children:[Object(ye.jsx)(ve.r,{className:"animate-spin inline-flex"})," ","  "," saving..."]}):Object(ye.jsx)("ul",{className:"w-full flex-shrink-0 flex flex-col items-center md:flex-row  md:justify-start space-y-2 md:space-y-0 md:space-x-2",children:e.map((function(e){return e?Object(ye.jsx)("li",{children:Object(ye.jsxs)(ke,{className:"w-40 md:w-auto h-9 md:h-auto px-1.5 py-0.5 text-sm font-semibold",type:"primary",color:e.color,onClick:e.func,children:[e.icon,Object(ye.jsx)("span",{children:e.label})]})},e.id):null}))})};return Object(ye.jsxs)("div",{className:"bg-blue-100 h-8 md:h-auto flex items-center justify-between md:flex-wrap py-5 px-2 md:px-6  relative",children:[Object(ye.jsx)("h1",{className:"text-lg md:text-2xl lg:text-3xl font-semibold text-gray-700 md:my-2",children:i}),Object(ye.jsx)("div",{className:"hidden md:block",children:O()}),Object(ye.jsx)("div",{className:"block md:hidden",children:Object(ye.jsxs)(ke,{className:"text-xl text-blue-500",type:"text",onClick:j,children:[Object(ye.jsx)("span",{className:"sr-only",children:"Expand menu bar"}),Object(ye.jsx)(ve.u,{})]})}),b&&Object(ye.jsx)("div",{className:"absolute z-10 md:hidden top-10 left-0 w-full bg-blue-100 shadow-xl px-3",ref:x,children:Object(ye.jsx)("div",{className:"my-4",children:O()})}),Object(ye.jsx)(m,{onOk:function(){var e;return a(t,(null===s||void 0===s||null===(e=s.state)||void 0===e?void 0:e.prevPathname)||re)},icon:Object(ye.jsx)(ve.a,{}),loading:l["deleting-sheet"],title:Object(ye.jsx)("span",{children:"Are you sure you want to delete this sheet ? "}),okText:"Yes"})]})}))),kt=Object(r.b)((function(e){return{sheetMaker:e.sheetMaker}}),{moveCellDown:function(e){return{type:C,payload:e}},moveCellUp:function(e){return{type:S,payload:e}},deleteCell:function(e){return{type:E,payload:e}},selectCell:function(e){return{type:_,payload:e}}})((function(e){var t=e.cellIndex,n=e.cellId,l=e.moveCellDown,c=e.moveCellUp,a=e.deleteCell,s=e.selectCell,r=e.sheetMaker,i=Me(),o=Object(Se.a)(i,2),d=o[0],u=o[1],b=r.cells,j=r.selectedCell;return Object(ye.jsxs)("div",{className:"w-full flex items-center space-x-3 cursor-pointer",onClick:function(){return s(n)},children:[Object(ye.jsx)("span",{className:"text-blue-500 w-3 text-sm font-bold",children:t+1}),Object(ye.jsxs)("div",{className:"flex-grow bg-gray-100 h-24 flex items-center overflow-hidden \n        ".concat(j===n?"border-2 border-blue-500":""),children:[Object(ye.jsxs)("div",{className:"w-8 flex-shrink-0 h-full bg-white flex flex-col justify-between items-center py-1",children:[Object(ye.jsxs)("div",{className:"w-full flex flex-col space-y-1 items-center",children:[Object(ye.jsx)(ke,{onClick:function(e){e.stopPropagation(),c(t)},type:"none",className:"p-1 rounded-full bg-blue-100 text-gray-700",title:"Move cell down",children:Object(ye.jsx)(ve.g,{})}),Object(ye.jsx)(ke,{onClick:function(e){e.stopPropagation(),l(t)},className:"p-1 rounded-full bg-blue-100 text-gray-700",type:"none",title:"Move cell up",children:Object(ye.jsx)(ve.f,{})})]}),Object(ye.jsx)(ke,{onClick:function(e){e.stopPropagation(),""===b[t].title&&b[t].rows.every((function(e){return""===e.value}))?a(n):u()},type:"none",className:"p-1 rounded-full bg-red-600 text-gray-50",title:"delete cell",children:Object(ye.jsx)(ve.a,{})})]}),Object(ye.jsx)("p",{className:"flex-grow px-2",children:b[t].title})]}),Object(ye.jsx)(d,{onOk:function(){a(n)},icon:Object(ye.jsx)(ve.a,{}),title:Object(ye.jsx)("span",{children:"Are you sure you want to delete this cell ? "}),okText:"Yes"})]},n)})),St=Object(r.b)((function(e){return{sheetMaker:e.sheetMaker}}),{addCell:function(){return{type:I}}})((function(e){var t=e.sheetMaker,n=e.addCell,c=t.cells,a=Object(l.useRef)();Object(l.useEffect)((function(){a.current.scrollIntoView(!0,{behavior:"smooth"})}),[c.length]);return Object(ye.jsxs)("div",{className:"w-full flex-shrink-0 h-full items-start md:w-56 max-w-full bg-blue-100 p-2  flex-col space-y-3 overflow-auto",children:[Object(ye.jsx)("div",{className:"hidden md:flex justify-center items-center p-1 text-blue-500 font-semibold bg-blue-200 bg-opacity-50",children:Object(ye.jsx)("h2",{children:"Cells"})}),c.map((function(e,t){return Object(ye.jsx)(kt,{cellId:e.id,cellIndex:t},e.id)})),Object(ye.jsx)("div",{className:"flex justify-center",ref:a,children:Object(ye.jsxs)(ke,{className:"font-bold",type:"text",onClick:n,children:[Object(ye.jsx)(ve.w,{className:"text-2xl"}),Object(ye.jsx)("span",{children:"New Cell"})]})})]})})),Ct=Object(r.b)((function(e){return{sheetMaker:e.sheetMaker,auth:e.auth,ongoingOnServer:e.ongoingOnServer}}),{getAndSetSheet:pt})((function(e){var t=e.match,n=e.sheetMaker,c=e.auth,a=e.getAndSetSheet,s=e.ongoingOnServer,r=Object(l.useState)("editor"),i=Object(Se.a)(r,2),o=i[0],d=i[1],u=t.params.id;Object(l.useEffect)((function(){a(u)}),[u,a]),Object(l.useEffect)((function(){d("editor")}),[n.selectedCell]);return Object(ye.jsx)($e,{children:function(){return s["getting-sheet-for-maker"]?Object(ye.jsx)(Ae,{}):(null===c||void 0===c?void 0:c.user)?(null===c||void 0===c||null===(e=c.user)||void 0===e?void 0:e._id)===(null===n||void 0===n?void 0:n.authorId)?Object(ye.jsx)("main",{className:"w-full h-full flex-grow overflow-y-hidden",children:Object(ye.jsxs)("div",{className:"h-full flex flex-col space-y-2 ",children:[Object(ye.jsx)(Nt,{title:n.title,sheetId:u}),Object(ye.jsxs)("div",{className:"hidden md:flex w-full h-full  space-x-1 overflow-y-hidden",children:[Object(ye.jsx)(St,{}),Object(ye.jsxs)("div",{className:"h-full flex flex-grow space-x-0.5",children:[Object(ye.jsx)("div",{className:"w-1/2 h-full",children:Object(ye.jsx)(yt,{})}),Object(ye.jsx)("div",{className:"w-1/2 h-full",children:Object(ye.jsx)(wt,{})})]})]}),Object(ye.jsxs)("div",{className:"md:hidden w-full h-full flex flex-col space-y-1 overflow-y-hidden",children:[Object(ye.jsxs)("div",{className:"flex w-full h-8",children:[Object(ye.jsx)(ke,{type:"none",className:"h-full w-1/2  border border-gray-300 \n                ".concat("cells"===o?"bg-blue-100":"bg-gray-100"),onClick:function(){return d("cells")},children:"Cells"}),Object(ye.jsx)(ke,{type:"none",className:"h-full w-1/2 border border-gray-300 \n                ".concat("editor"===o?"bg-blue-100":"bg-gray-100"),onClick:function(){return d("editor")},children:"Editor"})]}),"cells"===o?Object(ye.jsx)(St,{}):Object(ye.jsx)(yt,{})]})]})}):Object(ye.jsx)("main",{children:Object(ye.jsx)(tt,{type:"error",text:"You are not authoized to edit this sheet"})}):Object(ye.jsx)("main",{children:Object(ye.jsx)(tt,{type:"error",text:"Sign in to continue"})});var e}()})})),Et=[Object(ye.jsx)(Ve.a,{to:re,className:"underline",children:"Go to home page and browse sheets"}),Object(ye.jsx)(Ve.a,{to:ue,className:"underline ",children:"Make a new sheet"}),Object(ye.jsx)("a",{href:"https://github.com/mdtarhini/cheat-sheet-maker",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"Check out this website's source code on github"})],It=function(){return Object(ye.jsxs)("main",{className:"bg-gray-50 w-screen h-screen flex flex-col space-y-4 md:space-y-16 items-center px-2 py-10",children:[Object(ye.jsx)(Qe,{large:!0}),Object(ye.jsxs)("div",{className:"w-full md:w-1/2 lg:w-1/3 flex flex-col",children:[Object(ye.jsx)("div",{className:"w-full rounded-t-xl p-4 flex justify-center items-center bg-blue-500 text-white font-bold text-lg md:text-xl",children:"404 Page not found"}),Et.map((function(e,t){return Object(ye.jsx)("div",{className:" flex md:text-lg px-2 py-4 \n              ".concat(t%2===0?"bg-blue-200":"bg-blue-100","\n              ").concat(t===Et.length-1?"rounded-b-xl":""),children:e},t)}))]})]})},Tt=function(){return Object(ye.jsx)(le.b,{history:ae,children:Object(ye.jsx)("div",{children:Object(ye.jsxs)(le.c,{children:[Object(ye.jsx)(le.a,{path:re,exact:!0,component:et}),Object(ye.jsx)(le.a,{path:"".concat(se,"/:id"),exact:!0,component:ht}),Object(ye.jsx)(le.a,{path:ie,exact:!0,component:ft}),Object(ye.jsx)(le.a,{path:oe,exact:!0,component:mt}),Object(ye.jsx)(le.a,{path:"".concat(de,"/:id"),component:Ct}),Object(ye.jsx)(le.a,{path:ue,component:gt}),Object(ye.jsx)(le.a,{path:"".concat(be,"/:id"),component:gt}),Object(ye.jsx)(le.a,{path:"".concat(je,"/:id"),component:jt}),Object(ye.jsx)(le.a,{path:"".concat(xe,"/:id"),component:jt}),Object(ye.jsx)(le.a,{component:It})]})})})},_t=Object(r.b)(null,{loadUserByToken:function(){return function(e,t){var n=t().auth.token,l=pe(n);if(l.headers["x-auth-token"])return e(me({authenticating:!0})),fe.a.get("/api/users/user",l).then((function(t){e({type:h,payload:t.data.user})})).catch((function(t){e({type:f,payload:{for:"authenticating",msg:t.response.data.msg}})})).finally((function(){e(me({authenticating:!1}))}))}}})((function(e){var t=e.loadUserByToken;return Object(l.useEffect)((function(){t()}),[t]),Object(ye.jsxs)("div",{className:"overflow-x-hidden relative",children:[Object(ye.jsx)(Tt,{}),Object(ye.jsx)("div",{id:"modal-root"})]})})),Mt=Object(i.d)(ne,Object(i.a)(o.a));s.a.render(Object(ye.jsx)(r.a,{store:Mt,children:Object(ye.jsx)(_t,{})}),document.getElementById("root"))}},[[501,1,2]]]);
//# sourceMappingURL=main.cf7cafbb.chunk.js.map